<div class="form-group" id="zoneForm">
    <input type="text" id="zoneName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—á–∫–∏">
    <input type="number" id="zoneLat" placeholder="–®–∏—Ä–æ—Ç–∞">
    <input type="number" id="zoneLon" placeholder="–î–æ–ª–≥–æ—Ç–∞">
    <button class="btn" onclick="saveZone()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ—á–∫—É</button>
    <br><br>
    <label>–í—ã–±—Ä–∞—Ç—å –∏–∑ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Ç–æ—á–µ–∫:</label>
    <select id="savedZonesSelect"></select>
    <button class="btn" onclick="applySavedZone('unload')">üìç –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–æ–Ω—É –≤—ã–≥—Ä—É–∑–∫–∏</button>
    <button class="btn" onclick="applySavedZone('exc')">üìç –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä</button>
</div>

<script>
// ---------- —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ ----------
let savedZones = [
    {name: "—É–≥–æ–ª –≤–æ–∑–ª–µ –ø–æ–¥—ä–µ–º–∞", lat: 56.081522, lon: 93.201198}
];

// –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤ select
function updateSavedZonesSelect() {
    const sel = document.getElementById('savedZonesSelect');
    sel.innerHTML = '';
    savedZones.forEach((z, i) => {
        const opt = document.createElement('option');
        opt.value = i;
        opt.innerText = `${z.name} (${z.lat.toFixed(6)}, ${z.lon.toFixed(6)})`;
        sel.appendChild(opt);
    });
}

// —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–æ—á–∫–∏
function saveZone() {
    const name = document.getElementById('zoneName').value;
    const lat = parseFloat(document.getElementById('zoneLat').value);
    const lon = parseFloat(document.getElementById('zoneLon').value);
    if (!name || isNaN(lat) || isNaN(lon)) { notify('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!'); return; }
    savedZones.push({name, lat, lon});
    updateSavedZonesSelect();
    notify(`–¢–æ—á–∫–∞ "${name}" —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞`);
}

// –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π —Ç–æ—á–∫–∏
function applySavedZone(type) {
    const sel = document.getElementById('savedZonesSelect');
    const z = savedZones[sel.value];
    if (!z) return;
    if (type === 'unload') { data.unloadZone = {lat: z.lat, lon: z.lon, name: z.name}; notify('–ó–æ–Ω–∞ –≤—ã–≥—Ä—É–∑–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞'); }
    else { data.excZone = {lat: z.lat, lon: z.lon, name: z.name}; notify('–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'); }
    saveData();
    updateUI();
}

// –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
updateSavedZonesSelect();
</script>
















